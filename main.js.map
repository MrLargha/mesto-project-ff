{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/utils.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["// Анимация загрузки ответа от сервера на кнопках \"Сохранить\" в модальных окнах\nexport function renderLoadingForm(isLoading, popupButton) {\n    if (isLoading) {\n      popupButton.textContent = \"Сохранение...\";\n    } else {\n      popupButton.textContent = \"Сохранить\";\n    }\n  }","export const config = {\n  baseUrl: \"https://nomoreparties.co/v1/cohort-bac-2\",\n  headers: {\n    authorization: \"90452c92-776a-4c8d-9f54-cdf664e8b999\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\n// Обработка ответа от сервера\nexport const handleResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  } else {\n    throw new Error(\"Неверный код ответа сервера\");\n  }\n};\n\n// Получение карточек\nexport const getCardsFromServer = () => {\n  return fetch(config.baseUrl + \"/cards\", {\n    headers: {\n      authorization: config.headers.authorization,\n    },\n  }).then(handleResponse);\n};\n\n// Получение данных пользователя\nexport const getUserData = () => {\n  return fetch(config.baseUrl + \"/users/me\", {\n    headers: {\n      authorization: config.headers.authorization,\n    },\n  }).then(handleResponse);\n};\n\n// Запрос на изменение данных пользователя\nexport const editUserData = (newName, newDescription) => {\n  return fetch(config.baseUrl + \"/users/me\", {\n    method: \"PATCH\",\n    headers: {\n      authorization: config.headers.authorization,\n      \"Content-Type\": config.headers[\"Content-Type\"],\n    },\n    body: JSON.stringify({\n      name: newName,\n      about: newDescription,\n    }),\n  }).then(handleResponse);\n};\n\n// Запостить еще карточку\nexport const postNewCard = (newCard) => {\n  return fetch(config.baseUrl + \"/cards\", {\n    method: \"POST\",\n    headers: {\n      authorization: config.headers.authorization,\n      \"Content-Type\": config.headers[\"Content-Type\"],\n    },\n    body: JSON.stringify({\n      name: newCard.name,\n      link: newCard.link,\n    }),\n  }).then(handleResponse);\n};\n\n// Удалить карточку из сервера\nexport const deleteCardFromServer = (card) => {\n  return fetch(config.baseUrl + \"/cards/\" + card._id, {\n    method: \"DELETE\",\n    headers: {\n      authorization: config.headers.authorization,\n    },\n  }).then(handleResponse);\n};\n\n// Поставить лайк карточке на сервере\nexport const likeCardOnServer = (card) => {\n  // Хз откуда взять card._id после публикации карты\n  // Возможно, от сервака ответ приходит\n  return fetch(config.baseUrl + \"/cards/likes/\" + card._id, {\n    method: \"PUT\",\n    headers: {\n      authorization: config.headers.authorization,\n    },\n  }).then(handleResponse);\n};\n\n// Убрать лайк\nexport const dislikeCardOnServer = (card) => {\n  return fetch(config.baseUrl + \"/cards/likes/\" + card._id, {\n    method: \"DELETE\",\n    headers: {\n      authorization: config.headers.authorization,\n    },\n  }).then(handleResponse);\n};\n\n// Обновить аватарку\nexport const postNewAvatar = (url) => {\n  return fetch(config.baseUrl + \"/users/me/avatar\", {\n    method: \"PATCH\",\n    headers: {\n      authorization: config.headers.authorization,\n      \"Content-Type\": config.headers[\"Content-Type\"],\n    },\n    body: JSON.stringify({\n      avatar: url,\n    }),\n  }).then(handleResponse);\n};\n","import {\n  deleteCardFromServer,\n  likeCardOnServer,\n  dislikeCardOnServer,\n} from \"./api.js\";\n\n// Темлпейт карточки\nconst cardTemplate = document.querySelector(\"#card-template\").content;\n\n// Функция удаления карточки\nexport function deleteCard(event, card) {\n  const deleteItem = event.target.closest(\".card\");\n  deleteCardFromServer(card)\n    .then(() => {\n      deleteItem.remove();\n    })\n    .catch((error) => {\n      console.log(`Ошибка: ${error.message}`);\n    });\n}\n\n// Функция лайка карточки\nexport function likeCard(event, card) {\n  const likeButton = event.currentTarget;\n  const likeContainer = likeButton\n    .closest(\".card__description\")\n    .querySelector(\".card__like-container\");\n  const likeCountElement = likeContainer.querySelector(\n    \".card__like-button_likes\"\n  );\n\n  likeButton.classList.toggle(\"card__like-button_is-active\");\n\n  // Ставим/убираем лайк\n  if (likeButton.classList.contains(\"card__like-button_is-active\")) {\n    likeCardOnServer(card)\n      .then((data) => {\n        likeCountElement.textContent = data.likes.length;\n      })\n      .catch((error) => {\n        likeButton.classList.toggle(\"card__like-button_is-active\");\n        console.log(`Ошибка: ${error.message}`);\n      });\n  } else {\n    dislikeCardOnServer(card)\n      .then((data) => {\n        if (data.likes.length > 0) {\n          likeCountElement.textContent = data.likes.length;\n        } else {\n          likeCountElement.textContent = \"\";\n        }\n      })\n      .catch((error) => {\n        likeButton.classList.toggle(\"card__like-button_is-active\");\n        console.log(`Ошибка: ${error.message}`);\n      });\n  }\n}\n\n// Функция получения шаблона карточки\nfunction getCardTemplate() {\n  return cardTemplate.querySelector(\".card\").cloneNode(true);\n}\n\n// Функция создания карточки\nexport function createCard(\n  userId,\n  card,\n  deleteCallback,\n  likeCallBack,\n  openCallback\n) {\n  const cardElement = getCardTemplate();\n  const cardImage = cardElement.querySelector(\".card__image\"); // Выносим поиск элемента в отдельную переменную\n  const likeButton = cardElement.querySelector(\".card__like-button\");\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\n\n  cardElement.querySelector(\".card__title\").textContent = card.name;\n  cardImage.src = card.link; \n  cardImage.alt = \"Изображение \" + card.name; \n\n  // Отображение лайков на карточке\n  if (card.likes.length > 0) {\n    cardElement.querySelector(\".card__like-button_likes\").textContent =\n      card.likes.length;\n  }\n\n  card.likes.forEach((like) => {\n    // Проверяем совпадение id пользователя\n    if (like._id === userId) {\n      likeButton.classList.add(\"card__like-button_is-active\");\n    }\n  });\n\n  // Установка слушателей\n  cardElement.addEventListener(\"click\", openCallback);\n  likeButton.addEventListener(\"click\", () => {\n    likeCallBack(event, card);\n  });\n  if (userId === card.owner._id) {\n    deleteButton.addEventListener(\"click\", () => deleteCallback(event, card));\n  } else {\n    deleteButton.remove();\n  }\n\n  return cardElement;\n}\n","// Закрыть модальное окно\nexport function closeModal(modal) {\n  modal.classList.remove(\"popup_is-opened\");\n\n  modal.removeEventListener(\"click\", handleOverlayClick);\n  document.removeEventListener(\"keydown\", handleKeyDown);\n  modal\n    .querySelector(\".popup__close\")\n    .removeEventListener(\"click\", handleCloseButtonClick);\n\n  setTimeout(function () {\n    modal.classList.remove(\"popup_is-animated\");\n  }, 600); // Задержка анимации, в миллисекундах\n}\n\n// Открыть модальное окно\nexport function openModal(modal) {\n  modal.classList.add(\"popup_is-animated\");\n\n  setTimeout(function () {\n    modal.classList.add(\"popup_is-opened\");\n  }, 1); \n\n  modal.addEventListener(\"click\", handleOverlayClick);\n  document.addEventListener(\"keydown\", handleKeyDown);\n  modal\n    .querySelector(\".popup__close\")\n    .addEventListener(\"click\", handleCloseButtonClick);\n}\n\n//Обработчики закрытия попапов:\nfunction handleOverlayClick(event) {\n  const modal = event.currentTarget;\n  if (event.target === modal) {\n    closeModal(modal);\n  }\n}\n\n// Закрытие через кнопку крестика\nfunction handleCloseButtonClick(event) {\n  const modal = event.target.closest(\".popup\");\n  closeModal(modal);\n}\n\n// Закрытие через Esc\nfunction handleKeyDown(event) {\n  if (event.key === \"Escape\") {\n    const openedModal = document.querySelector(\".popup_is-opened\");\n    closeModal(openedModal);\n  }\n}\n","// Показать ошибку ввода\nexport const showInputError = (\n  formElement,\n  inputElement,\n  errorMessage,\n  { inputErrorClass, errorClass }\n) => {\n  const errorElement = formElement.querySelector(\n    `.${inputElement.name}-input-error`\n  );\n  inputElement.classList.add(inputErrorClass);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(errorClass);\n};\n\n// Скрыть ошибку ввода\nexport const hideInputError = (\n  formElement,\n  inputElement,\n  { inputErrorClass, errorClass }\n) => {\n  const errorElement = formElement.querySelector(\n    `.${inputElement.name}-input-error`\n  );\n  inputElement.classList.remove(inputErrorClass);\n  errorElement.classList.remove(errorClass);\n  errorElement.textContent = \"\";\n};\n\n// Проверка валидности ввода\nexport const checkInputValidity = (formElement, inputElement, settings) => {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n\n  if (!inputElement.validity.valid) {\n    showInputError(\n      formElement,\n      inputElement,\n      inputElement.validationMessage,\n      settings\n    );\n  } else {\n    hideInputError(formElement, inputElement, settings);\n  }\n};\n\n// Установка слушателей событий для полей ввода\nexport const setEventListeners = (formElement, settings) => {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settings.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    settings.submitButtonSelector\n  );\n  toggleButtonState(inputList, buttonElement, settings);\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", () => {\n      checkInputValidity(formElement, inputElement, settings);\n      toggleButtonState(inputList, buttonElement, settings);\n    });\n  });\n};\n\n// Переключение состояния кнопки (активна/неактивна)\nexport const toggleButtonState = (\n  inputList,\n  buttonElement,\n  { inactiveButtonClass }\n) => {\n  const isFormInvalid = inputList.some(\n    (inputElement) => !inputElement.validity.valid\n  );\n  buttonElement.disabled = isFormInvalid;\n  if (isFormInvalid) {\n    buttonElement.classList.add(inactiveButtonClass);\n  } else {\n    buttonElement.classList.remove(inactiveButtonClass);\n  }\n};\n\n// Очистка ошибок валидации и сделать кнопку неактивной\nexport const clearValidation = (formElement, settings) => {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settings.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    settings.submitButtonSelector\n  );\n\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, settings);\n  });\n\n  buttonElement.disabled = true;\n  buttonElement.classList.add(settings.inactiveButtonClass);\n};\n\n// Включение валидации всех форм\nexport const enableValidation = (settings) => {\n  const formList = Array.from(document.querySelectorAll(settings.formSelector));\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, settings);\n  });\n};","import \"../pages/index.css\"; \nimport { renderLoadingForm } from \"./utils.js\";\nimport { deleteCard, createCard, likeCard } from \"./card.js\"; \nimport { openModal, closeModal } from \"./modal.js\"; \nimport { clearValidation, enableValidation } from \"./validation.js\";\nimport {\n  getCardsFromServer,\n  getUserData,\n  editUserData,\n  postNewCard,\n  postNewAvatar,\n} from \"./api.js\";\n\n// DOM Для карточек\nconst content = document.querySelector(\".places\");\nconst cardList = content.querySelector(\".places__list\");\n\n// DOM Для edit button\nconst editButton = document.querySelector(\".profile__edit-button\");\nconst editModal = document.querySelector(\".popup_type_edit\");\nconst profileTitle = document.querySelector(\".profile__title\");\nconst profileDescription = document.querySelector(\".profile__description\");\nconst newProfileNameInput = editModal.querySelector(\".popup__input_type_name\");\nconst newProfileDescriptionInput = editModal.querySelector(\n  \".popup__input_type_description\"\n);\n\n// DOM Для add button\nconst newCardButton = document.querySelector(\".profile__add-button\");\nconst newCardModal = document.querySelector(\".popup_type_new-card\");\nconst newCardNameInput = newCardModal.querySelector(\n  \".popup__input_type_card-name\"\n);\nconst newCardUrlInput = newCardModal.querySelector(\".popup__input_type_url\");\nconst newCardFormElement = newCardModal.querySelector(\".popup__form\");\n\n// DOM для открытия карточек\nconst cardModal = document.querySelector(\".popup_type_image\");\nconst imageElement = cardModal.querySelector(\".popup__image\");\nconst captionElement = cardModal.querySelector(\".popup__caption\");\n\n// DOM для edit image button\nconst avatarImage = document.querySelector(\".profile__image\");\nconst newImageModal = document.querySelector(\".popup_type_new-image\");\nconst newImageModalInput = newImageModal.querySelector(\n  \".popup__input_type_url\"\n);\nconst newImageButton = document.querySelector(\".profile__image-edit-button\");\nconst newImageFormElement = newImageModal.querySelector(\".popup__form\");\n\nlet userId;\n\n// Элемент настроек валидации\nconst validationConfig = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"button_inactive\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__error_visible\",\n};\n\neditButton.addEventListener(\"click\", () => {\n  clearValidation(editModal, validationConfig);\n  editModalFunction(editModal);\n});\n\n// Добавить слушатель на кнопку add\nnewCardButton.addEventListener(\"click\", () => {\n  clearValidation(newCardModal, validationConfig);\n  openModal(newCardModal);\n});\n\n// Добавить слушатель на кнопку edit image\nnewImageButton.addEventListener(\"click\", () => {\n  clearValidation(newImageModal, validationConfig);\n  openModal(newImageModal);\n});\n\n// Добавить обработчик события submit для формы new card в модальном окне\nnewCardModal\n  .querySelector(\".popup__form\")\n  .addEventListener(\"submit\", newCardFormHandler);\n\n// Добавить обработчик события submit для формы edit в модальном окне\neditModal\n  .querySelector(\".popup__form\")\n  .addEventListener(\"submit\", editFormHandler);\n\n// Добавить обработчик события submit для формы new image в модальном окне\nnewImageModal\n  .querySelector(\".popup__form\")\n  .addEventListener(\"submit\", submitEditAvatarForm);\n\n// Поведение попапа изменения профиля (edit)\nfunction editModalFunction(modal) {\n  newProfileNameInput.value = profileTitle.textContent;\n  newProfileDescriptionInput.value = profileDescription.textContent;\n\n  // Открываем модальное окно\n  openModal(modal);\n}\n\n// Обработчики submit\nfunction submitEditAvatarForm(event) {\n  event.preventDefault();\n\n  renderLoadingForm(true, newImageModal.querySelector(\".popup__button\"));\n  postNewAvatar(newImageModalInput.value)\n    .then((res) => {\n      avatarImage.style.backgroundImage = `url(${res.avatar})`;\n      newImageFormElement.reset();\n      closeModal(newImageModal);\n    })\n    .catch((error) => {\n      console.log(`Ошибка: ${error.message}`);\n    })\n    .finally(() => {\n      renderLoadingForm(false, newImageModal.querySelector(\".popup__button\"));\n    });\n}\n\n// Обработчик edit button\nfunction editFormHandler(event) {\n  event.preventDefault();\n  renderLoadingForm(true, editModal.querySelector(\".popup__button\"));\n  const newName = newProfileNameInput.value;\n  const newDescription = newProfileDescriptionInput.value;\n\n  //Изменяем настройки на сервере\n  editUserData(newName, newDescription)\n    .then((res) => {\n      profileTitle.textContent = res.name;\n      profileDescription.textContent = res.about;\n      closeModal(editModal);\n    })\n    .catch((error) => {\n      console.log(`Ошибка: ${error.message}`);\n    })\n    .finally(() => {\n      renderLoadingForm(false, editModal.querySelector(\".popup__button\"));\n    });\n}\n\n// Обработчик new button\nfunction newCardFormHandler(event) {\n  event.preventDefault();\n  renderLoadingForm(true, newCardModal.querySelector(\".popup__button\"));\n  const newCard = {\n    name: newCardNameInput.value,\n    link: newCardUrlInput.value,\n  };\n\n  postNewCard(newCard)\n    .then((res) => {\n      // Добавляем новую карточку в список\n      const cardElement = createCard(\n        userId,\n        res,\n        deleteCard,\n        likeCard,\n        openCard\n      );\n\n      // Добавление карточки в DOM\n      cardList.prepend(cardElement);\n\n      // Очищаем поля формы с помощью метода reset()\n      newCardFormElement.reset();\n\n      // Закрываем модальное окно\n      closeModal(newCardModal);\n    })\n    // Не получилось запостить новую карточку\n    .catch((error) => {\n      console.log(`Ошибка: ${error.message}`);\n    })\n    .finally(() => {\n      renderLoadingForm(false, newCardModal.querySelector(\".popup__button\"));\n    });\n}\n\n// Функция открытия карточки\nfunction openCard(event) {\n  if (\n    event.target.classList.contains(\"card__like-button\") ||\n    event.target.classList.contains(\"card__delete-button\")\n  ) {\n    return;\n  }\n\n  const link = event.currentTarget.querySelector(\".card__image\").src;\n  const caption = event.currentTarget.querySelector(\".card__title\").textContent;\n\n  // Присваиваем значения карточки значению попапа\n  imageElement.src = link;\n  imageElement.alt = caption;\n  captionElement.textContent = caption;\n\n  openModal(cardModal);\n}\n\n\n// Ждём пока загрузится DOM\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  // Вызываем функцию enableValidation с передачей объекта настроек\n  enableValidation(validationConfig);\n});\n\n\n// Обработка карточек с сервера\nfunction renderCardsFromServer(data, userId) {\n  data.forEach((item) => {\n    const cardElement = createCard(\n      userId,\n      item,\n      deleteCard,\n      likeCard,\n      openCard\n    );\n    // Добавление карточки в DOM\n    cardList.append(cardElement);\n  });\n}\n\n// Обработка профиля с сервера\nfunction renderUserFromServer(user) {\n  avatarImage.style.backgroundImage = `url(${user.avatar})`;\n  profileTitle.textContent = user.name;\n  profileDescription.textContent = user.about;\n}\n\n// Базовая логика подгрузки информации о карточках и пользователе с сервера\nPromise.all([getCardsFromServer(), getUserData()])\n  .then(([data, user]) => {\n    userId = user._id;\n    renderCardsFromServer(data, user._id);\n    renderUserFromServer(user);\n  })\n  .catch((error) => {\n    console.log(`Ошибка: ${error.message}`);\n  });\n"],"names":["renderLoadingForm","isLoading","popupButton","textContent","config","handleResponse","res","ok","json","Error","cardTemplate","document","querySelector","content","deleteCard","event","card","deleteItem","target","closest","fetch","_id","method","headers","authorization","then","deleteCardFromServer","remove","catch","error","console","log","concat","message","likeCard","likeButton","currentTarget","likeCountElement","classList","toggle","contains","likeCardOnServer","data","likes","length","dislikeCardOnServer","createCard","userId","deleteCallback","likeCallBack","openCallback","cardElement","cloneNode","cardImage","deleteButton","name","src","link","alt","forEach","like","add","addEventListener","owner","closeModal","modal","removeEventListener","handleOverlayClick","handleKeyDown","handleCloseButtonClick","setTimeout","openModal","key","hideInputError","formElement","inputElement","_ref2","inputErrorClass","errorClass","errorElement","toggleButtonState","inputList","buttonElement","_ref3","inactiveButtonClass","isFormInvalid","some","validity","valid","disabled","clearValidation","settings","Array","from","querySelectorAll","inputSelector","submitButtonSelector","cardList","editButton","editModal","profileTitle","profileDescription","newProfileNameInput","newProfileDescriptionInput","newCardButton","newCardModal","newCardNameInput","newCardUrlInput","newCardFormElement","cardModal","imageElement","captionElement","avatarImage","newImageModal","newImageModalInput","newImageButton","newImageFormElement","validationConfig","formSelector","openCard","caption","value","preventDefault","newCard","body","JSON","stringify","postNewCard","prepend","reset","finally","newName","newDescription","about","editUserData","url","avatar","style","backgroundImage","patternMismatch","setCustomValidity","dataset","errorMessage","_ref","showInputError","validationMessage","checkInputValidity","setEventListeners","Promise","all","user","item","append","renderCardsFromServer","renderUserFromServer"],"sourceRoot":""}